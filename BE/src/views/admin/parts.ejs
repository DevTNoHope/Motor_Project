<% layout('layouts/admin') %>
<h1 class="text-2xl font-semibold mb-4">Quản lý Phụ tùng</h1>

<div class="mb-4">
  <a href="/admin/parts/new"
     class="px-4 py-2 bg-emerald-600 text-white rounded hover:bg-emerald-700">
     + Thêm phụ tùng
  </a>
</div>

<table class="w-full border border-slate-300 bg-white">
  <thead class="bg-slate-100">
    <tr>
      <th class="p-2 border">#</th>
      <th class="p-2 border text-left">Tên</th>
      <th class="p-2 border">Loại</th>
      <th class="p-2 border">SKU</th>
      <th class="p-2 border">Đơn vị</th>
      <th class="p-2 border">Giá (₫)</th>
      <th class="p-2 border">Trạng thái</th>
      <th class="p-2 border">Hành động</th>
    </tr>
  </thead>
  <tbody>
    <% parts.forEach((p, i) => { %>
    <tr class="hover:bg-slate-50">
      <td class="p-2 border text-center"><%= i + 1 %></td>
      <td class="p-2 border"><%= p.name %></td>
      <td class="p-2 border"><%= p.PartType.name %></td>
      <td class="p-2 border"><%= p.sku %></td>
      <td class="p-2 border text-center"><%= p.unit %></td>
      <td class="p-2 border text-right"><%= p.price.toLocaleString() %></td>
      <td class="p-2 border text-center">
        <%= p.is_active ? '✔️' : '❌' %>
      </td>
      <td class="p-2 border text-center">
        <a href="/admin/parts/<%= p.id %>/edit" class="text-blue-600 hover:underline">Sửa</a>
        <form action="/admin/parts/<%= p.id %>?_method=DELETE" method="POST" class="inline">
          <button class="text-red-600 hover:underline ml-2"
                  onclick="return confirm('Xóa phụ tùng này?')">Xóa</button>
        </form>
      </td>
    </tr>
    <% }) %>
  </tbody>
</table>

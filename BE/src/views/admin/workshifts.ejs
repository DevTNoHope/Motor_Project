<div class="mb-4 flex justify-between items-center">
  <a href="/admin/workshifts/new"
     class="px-4 py-2 bg-emerald-600 text-white rounded hover:bg-emerald-700">
     + Thêm ca làm việc
  </a>
</div>

<table class="w-full border border-slate-300 bg-white shadow-sm">
  <thead class="bg-slate-100">
    <tr>
      <th class="p-2 border text-center">#</th>
      <th class="p-2 border text-left">Thợ sửa xe</th>
      <th class="p-2 border text-center">Ngày</th>
      <th class="p-2 border text-center">Giờ bắt đầu</th>
      <th class="p-2 border text-center">Giờ kết thúc</th>
      <th class="p-2 border text-center">Step (phút)</th>
      <th class="p-2 border text-center">Hành động</th>
    </tr>
  </thead>
  <tbody>
    <% if (!workshifts || workshifts.length === 0) { %>
      <tr>
        <td colspan="7" class="p-4 text-center text-gray-500">Chưa có ca làm việc nào</td>
      </tr>
    <% } else { %>
      <% workshifts.forEach((w, i) => { %>
        <tr class="hover:bg-slate-50">
          <td class="p-2 border text-center"><%= i + 1 %></td>
          <td class="p-2 border"><%= w.Emp?.Acc?.name || 'Thợ #' + w.mechanic_id %></td>
          <td class="p-2 border text-center"><%= w.work_date %></td>
          <td class="p-2 border text-center">
            <%= Math.floor(w.start_min/60).toString().padStart(2,'0') + ':' + (w.start_min%60).toString().padStart(2,'0') %>
          </td>
          <td class="p-2 border text-center">
            <%= Math.floor(w.end_min/60).toString().padStart(2,'0') + ':' + (w.end_min%60).toString().padStart(2,'0') %>
          </td>
          <td class="p-2 border text-center"><%= w.step_min %></td>
          <td class="p-2 border text-center">
            <a href="/admin/workshifts/<%= w.id %>/edit" class="text-blue-600 hover:underline">Sửa</a>
            <form action="/admin/workshifts/<%= w.id %>?_method=DELETE" method="POST" class="inline">
              <button type="submit" class="text-red-600 hover:underline ml-2"
                      onclick="return confirm('Xóa ca làm việc này?')">Xóa</button>
            </form>
          </td>
        </tr>
      <% }) %>
    <% } %>
  </tbody>
</table>
